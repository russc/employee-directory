(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){e.exports=n(329)},168:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),l=n.n(i),c=n(38),o=n(334),u=n(333),m=n(332),s=n(331),p=n(35),d=n(72),f=n(73),g=n(84),b=n(74),h=n(85),E=(n(168),n(31)),y=n(18),j=n(43),O=n(25),v=n.n(O),_=n(29),$=n.n(_),x=n(60),S=n.n(x),k=n(61),C=n.n(k),w=n(30),A=n.n(w),D=n(330),F=n(105),P=n.n(F),z=n(36),B=n.n(z),q=n(150),I=n.n(q),N=n(21),V=n(32),W=n(51),Q=n.n(W);function R(){var e=Object(N.a)(["\n  position: absolute;\n  left: 27px;\n  top: 52px;\n  z-index: 10;\n"]);return R=function(){return e},e}function T(){var e=Object(N.a)(["\n  height: 90vh;\n  overflow-y: scroll;\n"]);return T=function(){return e},e}function H(){var e=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 4rem;\n"]);return H=function(){return e},e}function U(){var e=Object(N.a)(["\n  border-radius: 50%;\n  width: 128px;\n  height: 128px;\n"]);return U=function(){return e},e}function J(){var e=Object(N.a)(["\n  && {\n    background: transparent;\n    margin: 0 2rem;\n    /* padding: 1rem 3rem 3rem 3rem; */\n    height: ",";\n  }\n"]);return J=function(){return e},e}function L(){var e=Object(N.a)(["\n  display: flex;\n"]);return L=function(){return e},e}function G(){var e=Object(N.a)(["\n  background: rgb(251, 254, 207);\n  background: transparent;\n  width: 100%;\n  height: 50px;\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  z-index: 10;\n"]);return G=function(){return e},e}function M(){var e=Object(N.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  background: #353131;\n  padding: 0 10px;\n  text-transform: capitalize;\n  margin-bottom: 10px;\n  a {\n    margin-left: 10px;\n    &:hover svg {\n      stroke: #16cabd;\n    }\n  }\n"]);return M=function(){return e},e}function Y(){var e=Object(N.a)(["\n  text-align: center;\n  color: #fff;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.23);\n  z-index: 1;\n"]);return Y=function(){return e},e}var K=V.a.div(Y()),X=V.a.div(M()),Z=V.a.header(G()),ee=(V.a.nav(L()),Object(V.a)(Q.a)(J(),function(e){return e.height?e.height:"auto"})),te=V.a.img(U()),ne=V.a.form(H()),ae=Object(V.a)(v.a)(T()),re=Object(V.a)(Q.a)(R());function ie(e){var t=e.history,n=e.children,i=Object(a.useState)(!1),l=Object(y.a)(i,2),c=l[0],o=l[1];return r.a.createElement(Z,null,r.a.createElement(P.a,{xsDown:!0},r.a.createElement("div",null,Ke.map(function(e,n){return r.a.createElement(D.a,{to:e.path,key:n,style:{marginRight:"20px"},className:e.path===t.location.pathname?"current":""},e.name)}))),r.a.createElement(P.a,{smUp:!0},r.a.createElement(B.a,{color:"inherit","aria-label":"Menu",onClick:function(){return o(!c)}},r.a.createElement(I.a,null)),!0===c&&r.a.createElement(re,null,r.a.createElement(S.a,null,Ke.map(function(e,n){return r.a.createElement(C.a,{key:n,onClick:function(){return n=e.path,t.push(n),void o(!1);var n},className:"pointer menu-item"},e.name)})))),n)}var le=n(78),ce=n.n(le),oe=n(81),ue=n.n(oe),me=n(80),se=n.n(me),pe=n(79),de=n.n(pe),fe=n(40),ge=n(151),be=n.n(ge),he=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:n.props.open},n.handleClick=function(e){return function(){n.setState(Object(p.a)({open:!0},e))}},n.handleClose=function(){n.setState({open:!1})},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.open!==this.props.open&&this.setState({open:this.props.open})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be.a,{autoHideDuration:1e3,anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.props.message)}))}}]),t}(r.a.Component),Ee=n(37),ye=n.n(Ee),je=n(44),Oe=n.n(je),ve=n(39),_e=n.n(ve);function $e(){var e=Object(N.a)(["\n  mutation($dept: Int!, $title: String!) {\n    insert_positions(objects: { department: $dept, title: $title }) {\n      returning {\n        id\n        department\n        title\n      }\n    }\n  }\n"]);return $e=function(){return e},e}function xe(){var e=Object(N.a)(["\n  mutation($name: String!) {\n    insert_departments(objects: { name: $name }) {\n      returning {\n        id\n        name\n        positions {\n          id\n          title\n        }\n      }\n    }\n  }\n"]);return xe=function(){return e},e}function Se(){var e=Object(N.a)(["\n  query getDepartments {\n    departments {\n      id\n      name\n      positions {\n        id\n        title\n      }\n    }\n  }\n"]);return Se=function(){return e},e}function ke(){var e=Object(N.a)(["\n  mutation updateEmployee(\n    $id: Int!\n    $email: String!\n    $first: String!\n    $last: String!\n    $full: String!\n    $gender: String!\n    $phone: String!\n    $large: String!\n    $med: String!\n    $thumb: String!\n    $position: Int!\n  ) {\n    insert_employees(\n      objects: {\n        id: $id\n        email: $email\n        first_name: $first\n        full_name: $full\n        gender: $gender\n        last_name: $last\n        phone: $phone\n        pic_large: $large\n        pic_med: $med\n        pic_thumb: $thumb\n        position: $position\n      }\n      on_conflict: {\n        constraint: employees_pkey\n        update_columns: [\n          email\n          first_name\n          full_name\n          gender\n          phone\n          last_name\n          pic_large\n          pic_med\n          pic_thumb\n          position\n        ]\n      }\n    ) {\n      returning {\n        id\n        email\n        gender\n        first_name\n        last_name\n        full_name\n        phone\n        position\n        positionByPosition {\n          departmentByDepartment {\n            name\n          }\n          title\n        }\n        pic_large\n        pic_med\n        pic_thumb\n      }\n    }\n  }\n"]);return ke=function(){return e},e}function Ce(){var e=Object(N.a)(["\n  mutation addEmployee(\n    $email: String!\n    $first: String!\n    $last: String!\n    $full: String!\n    $gender: String!\n    $phone: String!\n    $large: String!\n    $med: String!\n    $thumb: String!\n    $position: Int!\n  ) {\n    insert_employees(\n      objects: {\n        email: $email\n        first_name: $first\n        full_name: $full\n        gender: $gender\n        last_name: $last\n        phone: $phone\n        pic_large: $large\n        pic_med: $med\n        pic_thumb: $thumb\n        position: $position\n      }\n    ) {\n      returning {\n        id\n        email\n        gender\n        first_name\n        last_name\n        full_name\n        phone\n        position\n        positionByPosition {\n          departmentByDepartment {\n            name\n          }\n          title\n        }\n        pic_large\n        pic_med\n        pic_thumb\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}function we(){var e=Object(N.a)(["\n  query($limit: Int, $offset: Int, $search: String) {\n    employees(\n      where: { full_name: { _ilike: $search } }\n      limit: $limit\n      offset: $offset\n      order_by: { last_name: asc }\n    ) {\n      id\n      email\n      gender\n      first_name\n      last_name\n      full_name\n      phone\n      position\n      positionByPosition {\n        departmentByDepartment {\n          name\n        }\n        title\n      }\n      pic_large\n      pic_med\n      pic_thumb\n    }\n\n    positions {\n      id\n      title\n    }\n  }\n"]);return we=function(){return e},e}var Ae=_e()(we()),De=_e()(Ce()),Fe=_e()(ke()),Pe=_e()(Se()),ze=_e()(xe()),Be=_e()($e());var qe=n(108),Ie=n.n(qe),Ne=n(154),Ve=n(155),We=function(){return r.a.createElement(K,null,r.a.createElement(X,null,r.a.createElement("p",null)),r.a.createElement(Ve.a,{height:65,width:100,speed:4,primaryColor:"rgba(219,241,191,.8)",secondaryColor:"#fff"},r.a.createElement("circle",{cx:"50",cy:"20",r:"18"}),r.a.createElement("rect",{x:"10",y:"45",rx:"4",ry:"4",width:"80",height:"3"}),r.a.createElement("rect",{x:"10",y:"55",rx:"3",ry:"3",width:"80",height:"3"})))},Qe=function(e){var t=e.amount,n=e.bottom,a=new Array(t).fill(r.a.createElement(We,null));return n?a.map(function(e,t){return r.a.createElement(A.a,{in:!0,key:t,timeout:{enter:100,exit:700}},r.a.createElement(v.a,{item:!0,xs:12,sm:6,md:4},e))}):r.a.createElement(ee,{elevation:0,style:{marginTop:"76px"}},r.a.createElement(v.a,{container:!0,spacing:24,style:{height:"80vh",overflowY:"scroll"}},a.map(function(e,t){return r.a.createElement(A.a,{in:!0,key:t,timeout:{enter:100,exit:700}},r.a.createElement(v.a,{item:!0,xs:12,sm:6,md:4},e))})))},Re=n(109),Te=n.n(Re),He=n(157),Ue=n.n(He),Je=n(156),Le=n.n(Je),Ge=n(158),Me=n.n(Ge),Ye=function(e){var t=e.dept,n=e.position;return r.a.createElement("div",null,r.a.createElement("p",null,t),r.a.createElement("p",null,n))};var Ke=[{path:"/admin",name:"Admin",component:function(e){var t=e.history,n=Object(a.useState)(""),i=Object(y.a)(n,2),l=i[0],c=i[1],o=Object(a.useState)(""),u=Object(y.a)(o,2),m=u[0],s=u[1],p=Object(a.useState)({open:!1,type:""}),d=Object(y.a)(p,2),f=d[0],g=d[1],b=Object(a.useState)({open:!1,message:""}),h=Object(y.a)(b,2),O=h[0],_=h[1];return r.a.createElement(a.Fragment,null,r.a.createElement(ie,{history:t}),r.a.createElement(ee,{elevation:0},r.a.createElement(A.a,{in:!0,timeout:{enter:700,exit:700}},r.a.createElement(ae,{container:!0,spacing:8},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement("h1",null,"Departments",r.a.createElement(Oe.a,{title:"Add Department"},r.a.createElement(B.a,{"aria-label":"Add Department",onClick:function(){return g({open:!0,type:"dept"})}},r.a.createElement(fe.d,{size:"30"}))))),r.a.createElement(j.c,{query:Pe},function(e){var t=e.data.departments,n=e.loading,a=e.error;return n?"loading...":a||t.map(function(e){return r.a.createElement(v.a,{item:!0,xs:12,md:6,lg:4,key:e.id},r.a.createElement(S.a,null,r.a.createElement("h2",null,e.name,r.a.createElement(Oe.a,{title:"Add position to ".concat(e.name),placement:"right-end"},r.a.createElement(B.a,{"aria-label":"Add position to ".concat(e.name),onClick:function(){g({open:!0,type:"pos"}),s(e.id)}},r.a.createElement(fe.d,{size:"30"})))),e.positions.length>0&&e.positions.map(function(e){return r.a.createElement(C.a,{key:e.id},e.title)})))})}))),r.a.createElement(ce.a,{open:f.open,"aria-labelledby":"form-dialog-title"},r.a.createElement(de.a,{id:"form-dialog-title"},"Add a ","dept"===f.type?"Department":"Position"),r.a.createElement(j.b,{mutation:"dept"===f.type?ze:Be,update:"dept"===f.type?function(e,t){var n=t.data.insert_departments.returning,a=e.readQuery({query:Pe}).departments;e.writeQuery({query:Pe,data:{departments:[].concat(Object(E.a)(a),Object(E.a)(n))}}),g({open:!1,type:""}),_({open:!0,message:"".concat(l," has been created!")})}:function(e,t){var n=t.data.insert_positions.returning,a=e.readQuery({query:Pe}).departments,r=a.findIndex(function(e){return e.id===n[0].department}),i=n[0],l=i.id,c=i.title;a[r].positions.push({id:l,title:c,__typename:"positions"}),console.log(a),e.writeQuery({query:Pe,data:{departments:Object(E.a)(a)}}),g({open:!1,type:""})}},function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),"dept"===f.type?e({variables:{name:l}}):(e({variables:{title:l,dept:m}}),_({open:!0,message:"".concat(l," has been created!")})),s(""),c("")}},r.a.createElement(se.a,null,r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"dept"===f.type?"department":"position",label:"dept"===f.type?"New Department":"New Position",type:"text",fullWidth:!0,defaultValue:l,onChange:function(e){return c(e.target.value)}})),r.a.createElement(ue.a,null,r.a.createElement(ye.a,{type:"submit",color:"primary"},"Add ","dept"===f.type?"Department":"Position"),r.a.createElement(ye.a,{onClick:function(){return g({open:!1,type:""})},color:"primary"},"Cancel"))))})),r.a.createElement(he,{open:O.open,message:O.message})))}},{path:"/",name:"Employees",component:function(e){var t=e.client,n=e.history,i=Object(a.useState)([]),l=Object(y.a)(i,2),c=l[0],o=l[1],u=Object(a.useState)([]),m=Object(y.a)(u,2),s=m[0],d=m[1],f=Object(a.useState)(""),g=Object(y.a)(f,2),b=g[0],h=g[1],O=Object(a.useState)("Add"),_=Object(y.a)(O,2),x=_[0],S=_[1],k=Object(a.useState)(null),C=Object(y.a)(k,2),w=C[0],D=C[1],F=Object(a.useState)(""),P=Object(y.a)(F,2),z=P[0],q=P[1],I=Object(a.useState)(0),N=Object(y.a)(I,2),V=N[0],W=N[1],Q=Object(a.useState)(!0),R=Object(y.a)(Q,2),T=R[0],H=R[1],U=Object(a.useState)(!1),J=Object(y.a)(U,2),L=J[0],G=J[1],M=Object(a.useState)(""),Y=Object(y.a)(M,2),Z=Y[0],re=Y[1],le=Object(a.useState)(!1),oe=Object(y.a)(le,2),me=oe[0],pe=oe[1],ge=Object(a.useState)(""),be=Object(y.a)(ge,2),he=be[0],Ee=be[1],je=Object(a.useState)(""),ve=Object(y.a)(je,2),_e=ve[0],$e=ve[1],xe=Object(a.useState)(""),Se=Object(y.a)(xe,2),ke=Se[0],Ce=Se[1],we=Object(a.useState)(""),Pe=Object(y.a)(we,2),ze=Pe[0],Be=Pe[1],qe=Object(a.useState)(""),Ve=Object(y.a)(qe,2),We=Ve[0],Re=Ve[1],He=Object(a.useState)(""),Je=Object(y.a)(He,2),Ge=Je[0],Ke=Je[1],Xe=function(){var e=Object(Ne.a)(Ie.a.mark(function e(){var n,a,r,i,l,u,m=arguments;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>0&&void 0!==m[0]&&m[0],e.next=3,t.query({query:Ae,variables:{limit:!0===n?null:12,offset:!0===n?0:V,search:!0===n?"%".concat(Z,"%"):null}});case 3:a=e.sent,r=a.data.employees,i=a.data.positions,l=a.loading,d(i),H(l),G(l),u=!0===n?Object(E.a)(r):[].concat(Object(E.a)(c),Object(E.a)(r)),o(u),!1===n&&W(V+12);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){Xe()},[]),T?r.a.createElement(Qe,{amount:9}):r.a.createElement(a.Fragment,null,r.a.createElement(ie,{history:n},r.a.createElement(ne,{onSubmit:function(e){e.preventDefault(),Xe(!0)}},r.a.createElement(Oe.a,{title:"Add Employee",placement:"left-start"},r.a.createElement(B.a,{"aria-label":"Add Employee",onClick:function(){pe(!0)}},r.a.createElement(fe.d,{size:"30"}))),r.a.createElement($.a,{id:"searchField",variant:"outlined",InputProps:{startAdornment:Z.length?r.a.createElement(Te.a,{position:"start"},r.a.createElement(Oe.a,{title:"Clear search"},r.a.createElement(Le.a,{className:"pointer",onClick:function(){return re(""),document.getElementById("searchField").value="",void Xe()}}))):r.a.createElement(Te.a,{position:"start"},r.a.createElement(Ue.a,{className:"under-menu"}))},defaultValue:Z,onChange:function(e){return re(e.target.value)}}),r.a.createElement(ye.a,{type:"submit",disabled:!Z.length},"Search"))),r.a.createElement(ee,{elevation:0},r.a.createElement(ae,{container:!0,spacing:24,onScroll:function(e){0===Z.length&&e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&(G(!0),Xe())}},0===c.length?r.a.createElement(A.a,{in:!0,timeout:{enter:100,exit:700}},r.a.createElement("h1",null,"No results")):c.map(function(e,t){return r.a.createElement(A.a,{in:!0,key:t,timeout:{enter:100,exit:700}},r.a.createElement(v.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(K,{className:e.updated&&"updated"},r.a.createElement(X,null,r.a.createElement("p",null,"".concat(e.first_name," ").concat(e.last_name," ")),r.a.createElement("div",null,r.a.createElement("a",{href:"tel:".concat(e.phone)},r.a.createElement(fe.c,{color:"#fff",size:"20px"})),r.a.createElement("a",{href:"mailto:".concat(e.email)},r.a.createElement(fe.b,{color:"#fff",size:"20px"})))),r.a.createElement(te,{src:e.pic_large,alt:e.email}),r.a.createElement(Ye,{dept:e.positionByPosition.departmentByDepartment.name,position:e.positionByPosition.title}),r.a.createElement(Oe.a,{title:"Edit Employee",placement:"left-start"},r.a.createElement(B.a,{"aria-label":"Edit Employee",onClick:function(){D(e.id),q(t),Ee(e.email),$e(e.first_name),Ce(e.last_name),Be(e.gender),Re(e.phone),Ke(e.pic_large),h(e.position),S("Edit"),pe(!0)}},r.a.createElement(fe.a,{color:"353131",size:"20px"}))))))}),L&&r.a.createElement(Qe,{amount:5,bottom:!0})),r.a.createElement(ce.a,{open:me,"aria-labelledby":"form-dialog-title"},r.a.createElement(de.a,{id:"form-dialog-title"},"Add a Employee"),r.a.createElement(j.b,{mutation:"Add"===x?De:Fe,update:function(e,t){var n=t.data.insert_employees.returning,a=Object(E.a)(c);""!==z?(a[z]=Object(p.a)({},n[0],{updated:!0}),o(a)):(o([Object(p.a)({},n[0],{updated:!0})]),setTimeout(function(){o([n[0]].concat(Object(E.a)(c)))},3e3)),pe(!1),D(""),q(""),Ee(""),$e(""),Ce(""),Be(""),Re(""),Ke(""),h(""),S("Add")}},function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n={email:he,first:_e,last:ke,full:"".concat(_e," ").concat(ke),gender:ze,phone:We,large:Ge,med:Ge,thumb:Ge,position:b},a="Add"===x?Object(p.a)({},n):Object(p.a)({id:w},n);e({variables:a})}},r.a.createElement(se.a,null,r.a.createElement(v.a,{container:!0,spacing:24},r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email",type:"email",fullWidth:!0,defaultValue:he,onChange:function(e){return Ee(e.target.value)}}),r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"first",label:"First Name",type:"text",fullWidth:!0,defaultValue:_e,onChange:function(e){return $e(e.target.value)}}),r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"last",label:"Last Name",type:"text",fullWidth:!0,defaultValue:ke,onChange:function(e){return Ce(e.target.value)}}),r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"gender",label:"Gender",type:"text",fullWidth:!0,defaultValue:ze,onChange:function(e){return Be(e.target.value)}}),r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"phone",label:"Phone",type:"text",fullWidth:!0,defaultValue:We,onChange:function(e){return Re(e.target.value)}}),r.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"pic",label:"Photo URL",type:"text",fullWidth:!0,defaultValue:Ge,onChange:function(e){return Ke(e.target.value)}})),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement($.a,{id:"position",select:!0,fullWidth:!0,label:"Select",value:b,onChange:function(e){return h(e.target.value)},helperText:"Select position",margin:"normal"},s.map(function(e){return r.a.createElement(Me.a,{key:e.id,value:e.id},e.title)}))))),r.a.createElement(ue.a,null,r.a.createElement(ye.a,{type:"submit",color:"primary"},x," Employee"),r.a.createElement(ye.a,{onClick:function(){return pe(!1)},color:"primary"},"Cancel"))))}))))}}],Xe=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).state=Object(p.a)({},n.props),n.getRoutes=function(e){return e.map(function(e,t){return r.a.createElement(m.a,{path:e.path,render:function(){return r.a.createElement(e.component,n.state)},key:t})})},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(u.a,null,this.getRoutes(Ke))}}]),t}(a.Component),Ze=n(52),et=n(159),tt=n(160),nt=new et.a,at=new Ze.a({cache:nt,link:new tt.a({uri:"https://pl-employee-dir.herokuapp.com/v1alpha1/graphql"})}),rt=Object(c.a)();l.a.render(r.a.createElement(j.a,{client:at},r.a.createElement(o.a,{history:rt},r.a.createElement(u.a,null,r.a.createElement(m.a,{path:"/",render:function(e){var t=e.history;return r.a.createElement(Xe,{client:at,history:t})}}),r.a.createElement(s.a,{from:"/",to:"/employees"})))),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.ec115bf8.chunk.js.map